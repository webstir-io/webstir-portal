"use strict";(self.webpackChunkwebstir_portal=self.webpackChunkwebstir_portal||[]).push([[2366],{8205:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"product/plans/testing/legacy-migration","title":"Testing Legacy Migration Plan","description":"Objective","source":"@site/docs/product/plans/testing/legacy-migration.md","sourceDirName":"product/plans/testing","slug":"/product/plans/testing/legacy-migration","permalink":"/docs/product/plans/testing/legacy-migration","draft":false,"unlisted":false,"editUrl":"https://github.com/webstir-io/webstir-portal/edit/main/docs/product/plans/testing/legacy-migration.md","tags":[],"version":"current","lastUpdatedAt":1761061153000,"frontMatter":{},"sidebar":"plans","previous":{"title":"Tester Architecture Refactor Plan","permalink":"/docs/product/plans/testing/architecture-refactor"}}');var r=n(4848),t=n(8453);const c={},l="Testing Legacy Migration Plan",a={},o=[{value:"Objective",id:"objective",level:2},{value:"Scope",id:"scope",level:2},{value:"Phases",id:"phases",level:2},{value:"Phase 1 \u2013 Shared Infrastructure Extraction",id:"phase-1--shared-infrastructure-extraction",level:3},{value:"Phase 2 \u2013 Workflow Suites Migration",id:"phase-2--workflow-suites-migration",level:3},{value:"Phase 3 \u2013 Pipeline &amp; Installer Tests",id:"phase-3--pipeline--installer-tests",level:3},{value:"Phase 4 \u2013 Framework Package Suites",id:"phase-4--framework-package-suites",level:3},{value:"Phase 5 \u2013 Final Cleanup",id:"phase-5--final-cleanup",level:3},{value:"Risks &amp; Mitigations",id:"risks--mitigations",level:2},{value:"Success Criteria",id:"success-criteria",level:2}];function d(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"testing-legacy-migration-plan",children:"Testing Legacy Migration Plan"})}),"\n",(0,r.jsx)(s.h2,{id:"objective",children:"Objective"}),"\n",(0,r.jsxs)(s.p,{children:["Complete the transition from the bespoke ",(0,r.jsx)(s.code,{children:"Tests"})," harness to the ",(0,r.jsx)(s.code,{children:"Tester"})," xUnit project by re-implementing every workflow, pipeline, and framework-package test directly in the new structure and deleting the legacy code."]}),"\n",(0,r.jsx)(s.h2,{id:"scope",children:"Scope"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Move all remaining ",(0,r.jsx)(s.code,{children:"Tests/**/*.cs"})," logic (workflows, pipelines, installers, framework packages, helpers) into ",(0,r.jsx)(s.code,{children:"Tester/"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Recreate shared infrastructure (",(0,r.jsx)(s.code,{children:"WorkspaceManager"}),", process helpers, assertions) inside ",(0,r.jsx)(s.code,{children:"Tester.Infrastructure"}),"."]}),"\n",(0,r.jsx)(s.li,{children:"Remove compatibility shims once no code references the legacy interfaces/types."}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"phases",children:"Phases"}),"\n",(0,r.jsx)(s.h3,{id:"phase-1--shared-infrastructure-extraction",children:"Phase 1 \u2013 Shared Infrastructure Extraction"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Add first-class helpers in ",(0,r.jsx)(s.code,{children:"Tester.Infrastructure"})," for:","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ProcessRunner"}),", ",(0,r.jsx)(s.code,{children:"ProcessRunOptions"}),", ",(0,r.jsx)(s.code,{children:"TerminationMethod"})]}),"\n",(0,r.jsx)(s.li,{children:"CLI runner wrapper"}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"WorkspaceManager"}),", seed baseline utilities, path helpers"]}),"\n",(0,r.jsx)(s.li,{children:"Assertion extensions needed across tests"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["Update existing xUnit tests to use the new helpers instead of ",(0,r.jsx)(s.code,{children:"Tests.Framework.*"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Delete the matching files from ",(0,r.jsx)(s.code,{children:"Tests/Framework"})," after replacement."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"phase-2--workflow-suites-migration",children:"Phase 2 \u2013 Workflow Suites Migration"}),"\n",(0,r.jsxs)(s.p,{children:["Port workflow cases one suite at a time, inlining their behavior into ",(0,r.jsx)(s.code,{children:"[Fact]"})," methods:"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Init"})," (default/named project)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Build"})," (happy path, missing app.html)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Publish"})," (success + TypeScript diagnostics)"]}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"Watch"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"Help"})}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Add"})," (page/test generators)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Test"})," (backend test execution)"]}),"\n"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["For each suite:","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Copy any helper logic into ",(0,r.jsx)(s.code,{children:"Tester/Workflows/<Suite>/"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Remove the legacy files under ",(0,r.jsx)(s.code,{children:"Tests/Workflows/<Suite>/"})," once migrated."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"phase-3--pipeline--installer-tests",children:"Phase 3 \u2013 Pipeline & Installer Tests"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Convert CSS/HTML/JS/Core pipeline tests to native xUnit facts, referencing shared helpers and snapshot assets."}),"\n",(0,r.jsxs)(s.li,{children:["Move snapshots to ",(0,r.jsx)(s.code,{children:"Tester/Pipelines/.../__snapshots__"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Migrate package installer tests (",(0,r.jsx)(s.code,{children:"TarballDependencyUpdate"}),") into ",(0,r.jsx)(s.code,{children:"Tester"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Delete corresponding directories under ",(0,r.jsx)(s.code,{children:"Tests/Pipelines"})," and ",(0,r.jsx)(s.code,{children:"Tests/PackageInstallers"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"phase-4--framework-package-suites",children:"Phase 4 \u2013 Framework Package Suites"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Port ",(0,r.jsx)(s.code,{children:"PackageAutomationUnitTests"}),", ",(0,r.jsx)(s.code,{children:"PackageAutomationIntegrationTests"}),", and ",(0,r.jsx)(s.code,{children:"ReleaseNotesSnapshotTests"})," into ",(0,r.jsx)(s.code,{children:"Tester/FrameworkPackages"}),"."]}),"\n",(0,r.jsx)(s.li,{children:"Recreate temporary repository/test workspace helpers as needed."}),"\n",(0,r.jsxs)(s.li,{children:["Remove the legacy files in ",(0,r.jsx)(s.code,{children:"Tests/FrameworkPackages"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"phase-5--final-cleanup",children:"Phase 5 \u2013 Final Cleanup"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Remove any remaining references to ",(0,r.jsx)(s.code,{children:"Tests.*"})," in ",(0,r.jsx)(s.code,{children:"Tester.csproj"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Delete the ",(0,r.jsx)(s.code,{children:"Tests"})," directory entirely."]}),"\n",(0,r.jsxs)(s.li,{children:["Drop compatibility shims (",(0,r.jsx)(s.code,{children:"LegacyTestCaseExecutor"}),", ",(0,r.jsx)(s.code,{children:"LegacyTestSuiteExecutor"}),") once unused."]}),"\n",(0,r.jsxs)(s.li,{children:["Run ",(0,r.jsx)(s.code,{children:"dotnet test Tester/Tester.csproj"})," (quick + full) to confirm parity."]}),"\n",(0,r.jsx)(s.li,{children:"Update documentation to reflect the completed migration."}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"risks--mitigations",children:"Risks & Mitigations"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Regression risk"}),": migrate suite-by-suite with tests green after each step."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Shared helper divergence"}),": centralize utilities early (Phase 1) to avoid duplication."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Snapshot churn"}),": move assets carefully and keep path references consistent."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"success-criteria",children:"Success Criteria"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["No ",(0,r.jsx)(s.code,{children:"Tests/"})," directory or legacy abstractions remain."]}),"\n",(0,r.jsxs)(s.li,{children:["The entire CLI/Engine coverage runs under ",(0,r.jsx)(s.code,{children:"dotnet test Tester/Tester.csproj"}),"."]}),"\n",(0,r.jsx)(s.li,{children:"Documentation and scripts reference only the new test project."}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>l});var i=n(6540);const r={},t=i.createContext(r);function c(e){const s=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);