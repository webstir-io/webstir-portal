"use strict";(self.webpackChunkwebstir_portal=self.webpackChunkwebstir_portal||[]).push([[2821],{8229:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"how-to/hmr-validation","title":"HMR Validation Checklist","description":"Follow these steps after touching the frontend hot-update pipeline.","source":"@site/docs/how-to/hmr-validation.md","sourceDirName":"how-to","slug":"/how-to/hmr-validation","permalink":"/docs/how-to/hmr-validation","draft":false,"unlisted":false,"editUrl":"https://github.com/webstir-io/webstir-portal/edit/main/docs/how-to/hmr-validation.md","tags":[],"version":"current","lastUpdatedAt":1764454564000,"frontMatter":{},"sidebar":"howTo","previous":{"title":"Frontend Watch Daemon","permalink":"/docs/how-to/frontend-watch"},"next":{"title":"Init","permalink":"/docs/how-to/init"}}');var i=t(4848),o=t(8453);const r={},l="HMR Validation Checklist",c={},a=[{value:"Automated Smoke",id:"automated-smoke",level:2},{value:"JavaScript/Edit Loop",id:"javascriptedit-loop",level:2},{value:"CSS Refresh",id:"css-refresh",level:2},{value:"Fallback Scenario",id:"fallback-scenario",level:2},{value:"HTML/Manifest Change",id:"htmlmanifest-change",level:2},{value:"Performance Spot Check",id:"performance-spot-check",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"hmr-validation-checklist",children:"HMR Validation Checklist"})}),"\n",(0,i.jsx)(n.p,{children:"Follow these steps after touching the frontend hot-update pipeline."}),"\n",(0,i.jsx)(n.h2,{id:"automated-smoke",children:"Automated Smoke"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Run ",(0,i.jsx)(n.code,{children:"./utilities/scripts/format-build.sh"})," (invokes TypeScript build + node tests)."]}),"\n",(0,i.jsxs)(n.li,{children:["Start ",(0,i.jsx)(n.code,{children:"webstir watch"})," in a clean workspace and confirm the daemon boots without errors."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"javascriptedit-loop",children:"JavaScript/Edit Loop"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Launch ",(0,i.jsx)(n.code,{children:"webstir watch"})," with ",(0,i.jsx)(n.code,{children:"WEBSTIR_FRONTEND_HMR_VERBOSE=1"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Modify ",(0,i.jsx)(n.code,{children:"Engine/Resources/src/frontend/pages/home/index.ts"})," (e.g., change a string)."]}),"\n",(0,i.jsxs)(n.li,{children:["Verify the browser console logs:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Applied hot update\u2026"})," message with module/style counts."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Totals \u2014 applied: <n>, fallbacks: <m>"})," increments without forcing a reload."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Repeat with additional JS edits to observe counters climbing without page refreshes."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"css-refresh",children:"CSS Refresh"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Edit ",(0,i.jsx)(n.code,{children:"Engine/Resources/src/frontend/pages/home/index.css"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Confirm the DOM injects a fresh stylesheet and console totals increment."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"fallback-scenario",children:"Fallback Scenario"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["From the browser console run ",(0,i.jsx)(n.code,{children:"window.__webstirAccept = () => false;"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Edit the page script again."}),"\n",(0,i.jsxs)(n.li,{children:["Confirm:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Console warning announces fallback with reasons and totals."}),"\n",(0,i.jsxs)(n.li,{children:["SSE status switches to ",(0,i.jsx)(n.code,{children:"hmr-fallback"}),", followed by a full reload."]}),"\n",(0,i.jsxs)(n.li,{children:["Daemon logs show ",(0,i.jsx)(n.code,{children:"Hot update totals \u2014 \u2026"})," and ",(0,i.jsx)(n.code,{children:"frontend.watch.pipeline.hmrfallback"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"htmlmanifest-change",children:"HTML/Manifest Change"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Modify ",(0,i.jsx)(n.code,{children:"Engine/Resources/src/frontend/app/app.html"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Observe the daemon logging a reload requirement and the browser performing a full refresh."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"performance-spot-check",children:"Performance Spot Check"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Capture ",(0,i.jsx)(n.code,{children:"frontend.watch.javascript.build.stats"})," and ",(0,i.jsx)(n.code,{children:"frontend.watch.hmr.summary"})," timings; ensure hot updates complete in under 200\u202fms for the seed project."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Document any deviations (especially fallback rates above 10%) before shipping."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var s=t(6540);const i={},o=s.createContext(i);function r(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);