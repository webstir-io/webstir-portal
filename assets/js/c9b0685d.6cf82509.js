"use strict";(self.webpackChunkwebstir_portal=self.webpackChunkwebstir_portal||[]).push([[3420],{5787:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"explanations/services","title":"Services","description":"Runtime helpers that coordinate builds, watching, and dev UX. Services keep workflows small by handling long-running behavior and cross-cutting concerns.","source":"@site/docs/explanations/services.md","sourceDirName":"explanations","slug":"/explanations/services","permalink":"/docs/explanations/services","draft":false,"unlisted":false,"editUrl":"https://github.com/webstir-io/webstir-portal/edit/main/docs/explanations/services.md","tags":[],"version":"current","lastUpdatedAt":1761061153000,"frontMatter":{},"sidebar":"explanations","previous":{"title":"Servers","permalink":"/docs/explanations/servers"},"next":{"title":"Solution","permalink":"/docs/explanations/solution"}}');var r=s(4848),l=s(8453);const c={},d="Services",t={},o=[{value:"Overview",id:"overview",level:2},{value:"DevService",id:"devservice",level:2},{value:"WatchService",id:"watchservice",level:2},{value:"ChangeService",id:"changeservice",level:2},{value:"Responsibilities Split",id:"responsibilities-split",level:2},{value:"Errors &amp; Logging",id:"errors--logging",level:2},{value:"Related Docs",id:"related-docs",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"services",children:"Services"})}),"\n",(0,r.jsx)(n.p,{children:"Runtime helpers that coordinate builds, watching, and dev UX. Services keep workflows small by handling long-running behavior and cross-cutting concerns."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"DevService: hosts the dev web server, live reload, and API proxy."}),"\n",(0,r.jsxs)(n.li,{children:["WatchService: watches ",(0,r.jsx)(n.code,{children:"src/**"}),", batches changes, and triggers minimal work."]}),"\n",(0,r.jsx)(n.li,{children:"ChangeService: classifies changes (frontend/backend/shared) and deduplicates."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["See also: ",(0,r.jsx)(n.a,{href:"/docs/explanations/engine",children:"Engine"})," and ",(0,r.jsx)(n.a,{href:"/docs/explanations/servers",children:"Servers"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"devservice",children:"DevService"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Serves ",(0,r.jsx)(n.code,{children:"build/frontend/**"})," during ",(0,r.jsx)(n.code,{children:"watch"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Exposes an SSE endpoint to notify connected browsers to reload after frontend rebuilds."}),"\n",(0,r.jsxs)(n.li,{children:["Proxies ",(0,r.jsx)(n.code,{children:"/api/*"})," to the Node API server that runs ",(0,r.jsx)(n.code,{children:"build/backend/index.js"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Publishes build status events (",(0,r.jsx)(n.code,{children:"building"}),", ",(0,r.jsx)(n.code,{children:"success"}),", ",(0,r.jsx)(n.code,{children:"error"}),") that drive the browser badge."]}),"\n",(0,r.jsx)(n.li,{children:"Applies clean URLs and dev cache headers."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Lifecycle"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Start after initial ",(0,r.jsx)(n.code,{children:"build"})," and ",(0,r.jsx)(n.code,{children:"test"})," in the ",(0,r.jsx)(n.code,{children:"watch"})," workflow."]}),"\n",(0,r.jsx)(n.li,{children:"On frontend changes: rebuild affected assets \u2192 broadcast reload via SSE."}),"\n",(0,r.jsx)(n.li,{children:"On backend changes: restart Node process (proxy keeps routing to the new process)."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Configuration"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Picks a free port or uses a configured one from CLI options/env."}),"\n",(0,r.jsx)(n.li,{children:"Logs the server URL and SSE status on start."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"watchservice",children:"WatchService"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Watches ",(0,r.jsx)(n.code,{children:"src/**"})," and ignores ",(0,r.jsx)(n.code,{children:"build/**"})," and ",(0,r.jsx)(n.code,{children:"dist/**"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Buffers and coalesces rapid events to avoid thrashing."}),"\n",(0,r.jsx)(n.li,{children:"Emits normalized change events to the ChangeService."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Behavior"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Debounce/queue changes; process in FIFO while merging duplicates."}),"\n",(0,r.jsx)(n.li,{children:"Survives editor temp files; only triggers when effective content changes."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"changeservice",children:"ChangeService"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Categorizes a change as frontend/backend/shared based on path."}),"\n",(0,r.jsx)(n.li,{children:"Computes the smallest rebuild unit (page, backend, or both)."}),"\n",(0,r.jsx)(n.li,{children:"Prevents duplicate or circular work."}),"\n",(0,r.jsxs)(n.li,{children:["Emits ",(0,r.jsx)(n.code,{children:"ClientNotificationType"})," events so DevService can broadcast status/reload messages."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Routing examples"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"src/frontend/pages/home/index.ts"})," \u2192 frontend rebuild for ",(0,r.jsx)(n.code,{children:"home"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"src/backend/index.ts"})," \u2192 backend rebuild and restart."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"src/shared/*.ts"})," \u2192 trigger both sides as needed."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"responsibilities-split",children:"Responsibilities Split"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Workflows decide \u201cwhen\u201d to start services and \u201cwhat\u201d to do next."}),"\n",(0,r.jsx)(n.li,{children:"Services decide \u201chow\u201d to watch, proxy, notify, and throttle."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"errors--logging",children:"Errors & Logging"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"All services surface clear, actionable logs."}),"\n",(0,r.jsx)(n.li,{children:"Failures bubble to the CLI with non-zero exit codes when unrecoverable."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"related-docs",children:"Related Docs"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Solution overview \u2014 ",(0,r.jsx)(n.a,{href:"/docs/explanations/solution",children:"solution"})]}),"\n",(0,r.jsxs)(n.li,{children:["Engine \u2014 ",(0,r.jsx)(n.a,{href:"/docs/explanations/engine",children:"engine"})]}),"\n",(0,r.jsxs)(n.li,{children:["Servers \u2014 ",(0,r.jsx)(n.a,{href:"/docs/explanations/servers",children:"servers"})]}),"\n",(0,r.jsxs)(n.li,{children:["Pipelines \u2014 ",(0,r.jsx)(n.a,{href:"/docs/explanations/pipelines",children:"pipelines"})]}),"\n",(0,r.jsxs)(n.li,{children:["Workspace \u2014 ",(0,r.jsx)(n.a,{href:"/docs/explanations/workspace",children:"workspace"})]}),"\n",(0,r.jsxs)(n.li,{children:["CLI \u2014 ",(0,r.jsx)(n.a,{href:"/docs/reference/cli",children:"cli"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>d});var i=s(6540);const r={},l=i.createContext(r);function c(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);