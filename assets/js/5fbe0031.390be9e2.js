"use strict";(self.webpackChunkwebstir_portal=self.webpackChunkwebstir_portal||[]).push([[7477],{8453:(e,s,t)=>{t.d(s,{R:()=>l,x:()=>o});var i=t(6540);const n={},r=i.createContext(n);function l(e){const s=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:l(e.components),i.createElement(r.Provider,{value:s},e.children)}},8720:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"how-to/test","title":"Test","description":"Build the project and execute tests through the Webstir test host. By default the host uses the VM-based @webstir-io/webstir-testing provider, but you can swap in alternatives such as the Vitest-powered provider without changing project code.","source":"@site/docs/how-to/test.md","sourceDirName":"how-to","slug":"/how-to/test","permalink":"/docs/how-to/test","draft":false,"unlisted":false,"editUrl":"https://github.com/webstir-io/webstir-portal/edit/main/docs/how-to/test.md","tags":[],"version":"current","lastUpdatedAt":1762915999000,"frontMatter":{},"sidebar":"howTo","previous":{"title":"Package Template Snippet","permalink":"/docs/how-to/snippets/package-template/"},"next":{"title":"Utilities","permalink":"/docs/how-to/utilities"}}');var n=t(4848),r=t(8453);const l={},o="Test",d={},c=[{value:"Purpose",id:"purpose",level:2},{value:"When To Use",id:"when-to-use",level:2},{value:"CLI",id:"cli",level:2},{value:"Steps",id:"steps",level:2},{value:"Scope the run",id:"scope-the-run",level:3},{value:"Provider Selection",id:"provider-selection",level:2},{value:"Defaults",id:"defaults",level:3},{value:"Quickstart: Vitest Provider",id:"quickstart-vitest-provider",level:3},{value:"Persist Provider Choices",id:"persist-provider-choices",level:3},{value:"Known Limitations",id:"known-limitations",level:2},{value:"Outputs",id:"outputs",level:2},{value:"Errors &amp; Exit Codes",id:"errors--exit-codes",level:2},{value:"Related Docs",id:"related-docs",level:2}];function a(e){const s={a:"a",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"test",children:"Test"})}),"\n",(0,n.jsxs)(s.p,{children:["Build the project and execute tests through the Webstir test host. By default the host uses the VM-based ",(0,n.jsx)(s.code,{children:"@webstir-io/webstir-testing"})," provider, but you can swap in alternatives such as the Vitest-powered provider without changing project code."]}),"\n",(0,n.jsx)(s.h2,{id:"purpose",children:"Purpose"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Validate behavior via end-to-end and smoke tests."}),"\n",(0,n.jsx)(s.li,{children:"Keep the public contracts locked down."}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"when-to-use",children:"When To Use"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"After changes to pipelines or templates."}),"\n",(0,n.jsx)(s.li,{children:"In CI to gate merges and releases."}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"cli",children:"CLI"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"webstir test [--runtime <frontend|backend|all>]"})}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"steps",children:"Steps"}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["Ensure build outputs are up to date (runs ",(0,n.jsx)(s.code,{children:"build"})," if needed)."]}),"\n",(0,n.jsxs)(s.li,{children:["Ensure the recorded ",(0,n.jsx)(s.code,{children:"@webstir-io/webstir-testing"})," package is installed into the workspace (resolved via ",(0,n.jsx)(s.code,{children:"webstir install"}),")."]}),"\n",(0,n.jsx)(s.li,{children:"Execute compiled frontend and backend tests via the test host and stream structured results back to the .NET bridge."}),"\n",(0,n.jsx)(s.li,{children:"Print pass/fail summary with file names for failures."}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"scope-the-run",children:"Scope the run"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Use ",(0,n.jsx)(s.code,{children:"--runtime frontend"}),", ",(0,n.jsx)(s.code,{children:"--runtime backend"}),", or ",(0,n.jsx)(s.code,{children:"--runtime all"})," (default) to limit which suites compile and execute."]}),"\n",(0,n.jsx)(s.li,{children:"The CLI logs the resolved workspace mode plus your filter so you can confirm what actually ran."}),"\n",(0,n.jsxs)(s.li,{children:["Environment toggle: ",(0,n.jsx)(s.code,{children:"WEBSTIR_TEST_RUNTIME=<scope>"})," mirrors the flag and is convenient for scripts/CI."]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"provider-selection",children:"Provider Selection"}),"\n",(0,n.jsx)(s.h3,{id:"defaults",children:"Defaults"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"@webstir-io/webstir-testing"})," (pinned VM runtime) runs compiled tests inside the sandbox that ships with the CLI."]}),"\n",(0,n.jsx)(s.li,{children:"Provider overrides apply to the entire manifest run; mixed providers per-module are not supported."}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"quickstart-vitest-provider",children:"Quickstart: Vitest Provider"}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["Install the provider (once per workspace):",(0,n.jsx)(s.br,{}),"\n","Install the provider with your package manager (e.g., ",(0,n.jsx)(s.code,{children:"pnpm add -D @webstir-io/vitest-testing"}),")."]}),"\n",(0,n.jsxs)(s.li,{children:["Ensure ",(0,n.jsx)(s.code,{children:"vitest"})," is available (the provider resolves the workspace dependency)."]}),"\n",(0,n.jsxs)(s.li,{children:["Run the suite:",(0,n.jsx)(s.br,{}),"\n",(0,n.jsx)(s.code,{children:"WEBSTIR_TESTING_PROVIDER=@webstir-io/vitest-testing webstir test"})]}),"\n",(0,n.jsxs)(s.li,{children:["For unpublished builds from the standalone repository, set ",(0,n.jsx)(s.code,{children:"WEBSTIR_TESTING_PROVIDER_SPEC=<path-to-local-vitest-testing>"}),", for example ",(0,n.jsx)(s.code,{children:"../vitest-testing"}),", so the host installs your local checkout."]}),"\n"]}),"\n",(0,n.jsxs)(s.blockquote,{children:["\n",(0,n.jsxs)(s.p,{children:["Tip: Keep ",(0,n.jsx)(s.code,{children:"WEBSTIR_TESTING_PROVIDER_SPEC"})," empty (default) when consuming the published provider from the registry."]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"persist-provider-choices",children:"Persist Provider Choices"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Generated workspaces include a ",(0,n.jsx)(s.code,{children:"webstir.providers.json"})," file with the default testing provider. Update it to persist provider selection in source control:"]}),"\n"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-json",children:'{\n  "testing": "@webstir-io/vitest-testing"\n}\n'})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["When ",(0,n.jsx)(s.code,{children:"webstir.providers.json"})," references a provider, run ",(0,n.jsx)(s.code,{children:"webstir install"})," to ensure the dependency is present before executing commands that rely on it."]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"known-limitations",children:"Known Limitations"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Snapshot assertions are not yet supported in the default VM provider; track behavior through standard assertions or adopt an alternate provider that supplies its own snapshot tooling."}),"\n",(0,n.jsx)(s.li,{children:"Tests execute serially today. Parallel execution toggles are planned but not yet exposed\u2014expect sequential runs until the runtime grows explicit parallel orchestration."}),"\n",(0,n.jsxs)(s.li,{children:["Registry installs require GitHub Packages credentials while the framework packages remain private. Ensure ",(0,n.jsx)(s.code,{children:"GH_PACKAGES_TOKEN"})," (or ",(0,n.jsx)(s.code,{children:"NODE_AUTH_TOKEN"}),") is available before running ",(0,n.jsx)(s.code,{children:"webstir install"}),"/",(0,n.jsx)(s.code,{children:"webstir test"})," in clean environments."]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"outputs",children:"Outputs"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Exit code 0 on success; non-zero on failures."}),"\n",(0,n.jsx)(s.li,{children:"Logs with clear failure messages."}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"errors--exit-codes",children:"Errors & Exit Codes"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Non-zero on test failures, build failures, or configuration errors."}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"related-docs",children:"Related Docs"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Workflows \u2014 ",(0,n.jsx)(s.a,{href:"/docs/reference/workflows",children:"workflows"})]}),"\n",(0,n.jsxs)(s.li,{children:["Tests \u2014 ",(0,n.jsx)(s.a,{href:"/docs/explanations/testing",children:"tests"})]}),"\n",(0,n.jsxs)(s.li,{children:["Engine \u2014 ",(0,n.jsx)(s.a,{href:"/docs/explanations/engine",children:"engine"})]}),"\n",(0,n.jsxs)(s.li,{children:["Pipelines \u2014 ",(0,n.jsx)(s.a,{href:"/docs/explanations/pipelines",children:"pipelines"})]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}}}]);