"use strict";(self.webpackChunkwebstir_portal=self.webpackChunkwebstir_portal||[]).push([[8709],{8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var i=t(6540);const r={},s=i.createContext(r);function o(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:n},e.children)}},9375:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"product/plans/framework/modular-refactor","title":"Modular Refactor Plan","description":"Context","source":"@site/docs/product/plans/framework/modular-refactor.md","sourceDirName":"product/plans/framework","slug":"/product/plans/framework/modular-refactor","permalink":"/docs/product/plans/framework/modular-refactor","draft":false,"unlisted":false,"editUrl":"https://github.com/webstir-io/webstir-portal/edit/main/docs/product/plans/framework/modular-refactor.md","tags":[],"version":"current","lastUpdatedAt":1761061153000,"frontMatter":{},"sidebar":"plans","previous":{"title":"Framework Installation","permalink":"/docs/product/plans/framework/installation"},"next":{"title":"Framework Package Release Automation Plan","permalink":"/docs/product/plans/framework/package-release-automation"}}');var r=t(4848),s=t(8453);const o={},l="Modular Refactor Plan",a={},d=[{value:"Context",id:"context",level:2},{value:"Objectives",id:"objectives",level:2},{value:"Completed Foundations",id:"completed-foundations",level:2},{value:"Completed Work",id:"completed-work",level:2},{value:"Remaining Work",id:"remaining-work",level:2},{value:"1. Refresh CLI &amp; Docs",id:"1-refresh-cli--docs",level:3},{value:"2. Harden Runtime &amp; Automation",id:"2-harden-runtime--automation",level:3},{value:"3. Repository Hygiene",id:"3-repository-hygiene",level:3},{value:"Validation Checklist",id:"validation-checklist",level:2},{value:"Immediate Next Actions",id:"immediate-next-actions",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"modular-refactor-plan",children:"Modular Refactor Plan"})}),"\n",(0,r.jsx)(n.h2,{id:"context",children:"Context"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Contract packages (",(0,r.jsx)(n.code,{children:"@webstir-io/testing-contract"}),", ",(0,r.jsx)(n.code,{children:"@webstir-io/module-contract"}),") are already published with generated schemas."]}),"\n",(0,r.jsxs)(n.li,{children:["Framework tooling (",(0,r.jsx)(n.code,{children:"@webstir-io/webstir-testing"}),", ",(0,r.jsx)(n.code,{children:"@webstir-io/webstir-frontend"}),", ",(0,r.jsx)(n.code,{children:"@webstir-io/webstir-backend"}),", etc.) lives in dedicated repositories and publishes to GitHub Packages; the mono-repo consumes pinned registry versions."]}),"\n",(0,r.jsxs)(n.li,{children:["Provider overrides are supported through environment variables and ",(0,r.jsx)(n.code,{children:"webstir.providers.json"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Solo maintainer project: no external teams, staged rollouts, or legacy migration paths to support."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"objectives",children:"Objectives"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Finish the host/provider split inside Webstir so testing follows the same provider model as the frontend and backend hosts."}),"\n",(0,r.jsx)(n.li,{children:"Deliver at least one alternate provider (Vitest) to prove the contract in practice."}),"\n",(0,r.jsx)(n.li,{children:"Keep CLI help, documentation, and automation aligned with the modularised architecture."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"completed-foundations",children:"Completed Foundations"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Framework packages and contract definitions extracted with their own CI/release workflows."}),"\n",(0,r.jsxs)(n.li,{children:["Registry-first install flow verified; ",(0,r.jsx)(n.code,{children:"framework packages sync/publish"})," pins versions without tarballs."]}),"\n",(0,r.jsx)(n.li,{children:"Provider selection knobs exposed via env/config with defaults pointing to the VM-based provider."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"completed-work",children:"Completed Work"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Webstir test host now owns CLI/manifest/event orchestration; default provider lives in ",(0,r.jsx)(n.code,{children:"@webstir-io/webstir-testing"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Vitest provider promoted to its own repository (",(0,r.jsx)(n.code,{children:"@webstir-io/vitest-testing"}),") with CI/release automation and documentation updates across Webstir to cover provider selection/registry installs."]}),"\n",(0,r.jsxs)(n.li,{children:["Vite frontend provider pulled into ",(0,r.jsx)(n.code,{children:"@webstir-io/vite-frontend"})," with matching automation; guidance updated to reference standalone packages instead of in-repo pilots."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"remaining-work",children:"Remaining Work"}),"\n",(0,r.jsx)(n.h3,{id:"1-refresh-cli--docs",children:"1. Refresh CLI & Docs"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ensure scaffolding commands and help output clearly surface provider choices or at least call out the override knobs."}),"\n",(0,r.jsx)(n.li,{children:"Audit remaining docs/scripts for tarball-era references and remove them, adding Vitest/Vite quickstarts where helpful."}),"\n",(0,r.jsx)(n.li,{children:"Document configuration guidance (timeouts, watch mode, known gaps) for the optional providers."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-harden-runtime--automation",children:"2. Harden Runtime & Automation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Wrap up TODOs in the VM runtime (e.g., snapshot support, parallelism toggles) or document intentional gaps."}),"\n",(0,r.jsxs)(n.li,{children:["Confirm ",(0,r.jsx)(n.code,{children:"framework packages sync/publish"})," relies solely on registry installs, adding clear logging for auth or registry failures.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Default registry install path now logs GH_PACKAGES_TOKEN guidance on failure."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"(Deferred) Extend CI to run host + provider suites (matrix covering VM + Vitest/Vite) once alternate providers are back in scope."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-repository-hygiene",children:"3. Repository Hygiene"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Delete leftover scripts/configuration from the tarball workflow and prune redundant assets.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u2705 Removed legacy backend tarball asset (",(0,r.jsx)(n.code,{children:"Framework/Backend/webstir-backend-0-0-0.tgz"}),") and archived the tarball-era plan."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Update ",(0,r.jsx)(n.code,{children:"CONTRIBUTING.md"})," to explain the simplified dev/publish flow.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Contributing guide now documents registry auth, local workflows, and release steps."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Keep docs aligned with the new package layout (no references to retired ADRs or sub-phase files).","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Installation plan updated for registry installs; tarball plans marked as historical context-only."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Default testing doc now captures the remaining VM runtime limitations (snapshots/parallelism) so the TODOs are documented until features land."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"validation-checklist",children:"Validation Checklist"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"dotnet test Tester/Tester.csproj"})," succeeds with default and Vitest providers."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"webstir test"})," on a clean workspace installs packages from the registry only (requires ",(0,r.jsx)(n.code,{children:"GH_PACKAGES_TOKEN"}),"; CLI now surfaces auth guidance when creds are missing)."]}),"\n",(0,r.jsx)(n.li,{children:"CLI help and docs reference the host/provider setup and point to live packages."}),"\n",(0,r.jsx)(n.li,{children:"GitHub Actions execute the default provider suite on every push (alternate provider matrix deferred)."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"immediate-next-actions",children:"Immediate Next Actions"}),"\n",(0,r.jsx)(n.p,{children:"Plan complete \u2014 defer alternate provider matrix until those providers re-enter scope."})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);