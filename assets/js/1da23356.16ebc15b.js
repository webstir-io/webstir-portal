"use strict";(self.webpackChunkwebstir_portal=self.webpackChunkwebstir_portal||[]).push([[2026],{2266:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"product/plans/infrastructure/process-runner","title":"Process Runner \u2014 Phased Plan","description":"Phase 0: Library Introduction","source":"@site/docs/product/plans/infrastructure/process-runner.md","sourceDirName":"product/plans/infrastructure","slug":"/product/plans/infrastructure/process-runner","permalink":"/docs/product/plans/infrastructure/process-runner","draft":false,"unlisted":false,"editUrl":"https://github.com/webstir-io/webstir-portal/edit/main/docs/product/plans/infrastructure/process-runner.md","tags":[],"version":"current","lastUpdatedAt":1761532142000,"frontMatter":{},"sidebar":"plans","previous":{"title":"Framework Packaging Plan","permalink":"/docs/product/plans/framework/packaging"},"next":{"title":"MCP Integration with Webstir","permalink":"/docs/product/plans/mcp/brainstorming"}}');var i=s(4848),t=s(8453);const a={},l="Process Runner \u2014 Phased Plan",o={},c=[{value:"Phase 0: Library Introduction",id:"phase-0-library-introduction",level:2},{value:"Phase 1: Low-Risk Adopters",id:"phase-1-low-risk-adopters",level:2},{value:"Phase 2: Build and Test Tooling",id:"phase-2-build-and-test-tooling",level:2},{value:"Phase 3: Long-Running Daemons",id:"phase-3-long-running-daemons",level:2},{value:"Phase 4: Tester Consolidation",id:"phase-4-tester-consolidation",level:2},{value:"Phase 5: Cleanup",id:"phase-5-cleanup",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"process-runner--phased-plan",children:"Process Runner \u2014 Phased Plan"})}),"\n",(0,i.jsx)(n.h2,{id:"phase-0-library-introduction",children:"Phase 0: Library Introduction"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Implement shared runner with ",(0,i.jsx)(n.code,{children:"RunAsync"})," and ",(0,i.jsx)(n.code,{children:"StartAsync"})," modes."]}),"\n",(0,i.jsxs)(n.li,{children:["Register ",(0,i.jsx)(n.code,{children:"IProcessRunner"})," in DI for Framework and Engine; enable fakes for Tester."]}),"\n",(0,i.jsx)(n.li,{children:"Achieve parity for simple commands (spawn, await, capture output, timeouts)."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"phase-1-low-risk-adopters",children:"Phase 1: Low-Risk Adopters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["NodeRuntime: ",(0,i.jsx)(n.code,{children:"node --version"})," via shared runner."]}),"\n",(0,i.jsxs)(n.li,{children:["Package manager runner: install dependencies with pnpm by default (",(0,i.jsx)(n.code,{children:"pnpm install --frozen-lockfile"})," \u2192 fallback to ",(0,i.jsx)(n.code,{children:"npm install"})," when required)."]}),"\n",(0,i.jsxs)(n.li,{children:["Framework Packaging: ",(0,i.jsx)(n.code,{children:"npm view"})," / ",(0,i.jsx)(n.code,{children:"npm publish"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"phase-2-build-and-test-tooling",children:"Phase 2: Build and Test Tooling"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["TestWorkflow: TypeScript compile (",(0,i.jsx)(n.code,{children:"tsc"}),") using ",(0,i.jsx)(n.code,{children:"RunAsync"})," with per-line streaming."]}),"\n",(0,i.jsxs)(n.li,{children:["ModuleBuildExecutor and TestCliRunner: use ",(0,i.jsx)(n.code,{children:"StartAsync"}),"; keep event parsing at call sites."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"phase-3-long-running-daemons",children:"Phase 3: Long-Running Daemons"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["NodeServer: startup, readiness detection, and shutdown via ",(0,i.jsx)(n.code,{children:"StartAsync"})," (Ctrl+C when available)."]}),"\n",(0,i.jsx)(n.li,{children:"FrontendWatcher/Worker: watch mode with stdin writes and diagnostics."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"phase-4-tester-consolidation",children:"Phase 4: Tester Consolidation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Replace ",(0,i.jsx)(n.code,{children:"Tester/Infrastructure/ProcessRunner"})," with the shared runner, including wait-for-signal and termination policies."]}),"\n",(0,i.jsxs)(n.li,{children:["Provide a ",(0,i.jsx)(n.code,{children:"FakeProcessRunner"})," for unit tests."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"phase-5-cleanup",children:"Phase 5: Cleanup"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Remove remaining direct ",(0,i.jsx)(n.code,{children:"ProcessStartInfo"})," / ",(0,i.jsx)(n.code,{children:"Process.Start"})," usage across the repo."]}),"\n",(0,i.jsx)(n.li,{children:"Remove duplicate kill/Ctrl+C helpers once all callers use the shared runner."}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>l});var r=s(6540);const i={},t=r.createContext(i);function a(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);