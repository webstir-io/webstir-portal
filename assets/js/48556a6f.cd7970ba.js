"use strict";(self.webpackChunkwebstir_portal=self.webpackChunkwebstir_portal||[]).push([[6010],{411:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"product/plans/framework/installation","title":"Framework Installation","description":"Guidance for packaging and distributing the Webstir CLI so developers can install it with modern tooling while keeping workspace dependencies in sync.","source":"@site/docs/product/plans/framework/installation.md","sourceDirName":"product/plans/framework","slug":"/product/plans/framework/installation","permalink":"/docs/product/plans/framework/installation","draft":false,"unlisted":false,"editUrl":"https://github.com/webstir-io/webstir-portal/edit/main/docs/product/plans/framework/installation.md","tags":[],"version":"current","lastUpdatedAt":1761061153000,"frontMatter":{},"sidebar":"plans","previous":{"title":"Webstir Backend Design","permalink":"/docs/product/plans/backend/webstir-backend-design"},"next":{"title":"Modular Refactor Plan","permalink":"/docs/product/plans/framework/modular-refactor"}}');var a=i(4848),l=i(8453);const t={},r="Framework Installation",c={},o=[{value:"Goals",id:"goals",level:2},{value:"Release Pipeline",id:"release-pipeline",level:2},{value:"Distribution Channels",id:"distribution-channels",level:2},{value:"Homebrew (macOS &amp; Linux)",id:"homebrew-macos--linux",level:3},{value:"npm Wrapper",id:"npm-wrapper",level:3},{value:"Curl-able Installer",id:"curl-able-installer",level:3},{value:"Windows Package Managers",id:"windows-package-managers",level:3},{value:"Linux Packages (Optional)",id:"linux-packages-optional",level:3},{value:"Version Managers",id:"version-managers",level:3},{value:"Post-Install Workflow",id:"post-install-workflow",level:2},{value:"Maintainer Checklist",id:"maintainer-checklist",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",input:"input",li:"li",ol:"ol",p:"p",ul:"ul",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"framework-installation",children:"Framework Installation"})}),"\n",(0,a.jsx)(n.p,{children:"Guidance for packaging and distributing the Webstir CLI so developers can install it with modern tooling while keeping workspace dependencies in sync."}),"\n",(0,a.jsx)(n.h2,{id:"goals",children:"Goals"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Offer one-command installs on every major platform."}),"\n",(0,a.jsx)(n.li,{children:"Publish signed, reproducible binaries that map back to each release."}),"\n",(0,a.jsx)(n.li,{children:"Keep downstream installers in lockstep by sourcing metadata from a single manifest."}),"\n",(0,a.jsxs)(n.li,{children:["Preserve the offline-friendly workflow inside projects by continuing to run ",(0,a.jsx)(n.code,{children:"webstir install"})," after scaffolding."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"release-pipeline",children:"Release Pipeline"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Build platform-specific, self-contained binaries via ",(0,a.jsx)(n.code,{children:"publish.sh"})," (macOS arm64/x64, Linux x64/arm64, Windows x64)."]}),"\n",(0,a.jsxs)(n.li,{children:["Generate a release manifest (",(0,a.jsx)(n.code,{children:"install-manifest.json"}),") that records version, platform identifiers, download URLs, and checksums for each binary."]}),"\n",(0,a.jsxs)(n.li,{children:["Attach binaries and the manifest to the GitHub release (or artifact store) and sign them with ",(0,a.jsx)(n.code,{children:"cosign"})," or ",(0,a.jsx)(n.code,{children:"minisign"})," for verification."]}),"\n",(0,a.jsx)(n.li,{children:"Notify downstream installers (Homebrew tap, npm wrapper, curl script, winget/Scoop specs) to consume the manifest so every channel stays current automatically."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"distribution-channels",children:"Distribution Channels"}),"\n",(0,a.jsx)(n.h3,{id:"homebrew-macos--linux",children:"Homebrew (macOS & Linux)"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Maintain a tap such as ",(0,a.jsx)(n.code,{children:"electric/webstir"})," with a formula that downloads the matching binary from the manifest URL and validates its ",(0,a.jsx)(n.code,{children:"sha256"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Provide separate bottles for ",(0,a.jsx)(n.code,{children:"arm64"})," and ",(0,a.jsx)(n.code,{children:"x86_64"}),", and add ",(0,a.jsx)(n.code,{children:'depends_on "node"'})," if Node is not bundled."]}),"\n",(0,a.jsxs)(n.li,{children:["Include a ",(0,a.jsx)(n.code,{children:"test do"})," block that runs ",(0,a.jsx)(n.code,{children:"webstir --version"})," to satisfy Homebrew audit requirements."]}),"\n",(0,a.jsxs)(n.li,{children:["Once stable, upstream to ",(0,a.jsx)(n.code,{children:"homebrew-core"})," for automatic updates when the tap formula is bumped."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"npm-wrapper",children:"npm Wrapper"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Publish ",(0,a.jsx)(n.code,{children:"@electric-coding/webstir"})," with a lightweight JavaScript launcher."]}),"\n",(0,a.jsxs)(n.li,{children:["During ",(0,a.jsx)(n.code,{children:"postinstall"}),", read the manifest, download the correct binary for the current ",(0,a.jsx)(n.code,{children:"os/arch"}),", verify the checksum, and cache it under ",(0,a.jsx)(n.code,{children:"~/.webstir"})," (or npm cache) for reuse."]}),"\n",(0,a.jsxs)(n.li,{children:["Expose the CLI through the package ",(0,a.jsx)(n.code,{children:"bin"})," field so ",(0,a.jsx)(n.code,{children:"npm install -g @electric-coding/webstir"})," and ",(0,a.jsx)(n.code,{children:"npx webstir"})," work out of the box."]}),"\n",(0,a.jsx)(n.li,{children:"Fail gracefully offline by reusing cached binaries; surface clear instructions to fetch updates once connectivity is restored."}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"curl-able-installer",children:"Curl-able Installer"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Provide ",(0,a.jsx)(n.code,{children:"https://example.com/install.sh"})," that fetches the manifest, chooses the right binary, verifies signature + checksum, and installs to ",(0,a.jsx)(n.code,{children:"~/.local/bin"})," (or prompts for ",(0,a.jsx)(n.code,{children:"/usr/local/bin"}),")."]}),"\n",(0,a.jsxs)(n.li,{children:["Support ",(0,a.jsx)(n.code,{children:"--version"})," and ",(0,a.jsx)(n.code,{children:"--install-dir"})," flags so CI pipelines and container images can pin specific releases."]}),"\n",(0,a.jsx)(n.li,{children:"Publish a companion PowerShell script for Windows users who prefer manual installs."}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"windows-package-managers",children:"Windows Package Managers"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Generate winget manifests via ",(0,a.jsx)(n.code,{children:"wingetcreate"})," pointing at the Windows binary URL and checksum."]}),"\n",(0,a.jsx)(n.li,{children:"Maintain a Scoop bucket entry that downloads and verifies the binary, placing shims in place."}),"\n",(0,a.jsx)(n.li,{children:"Keep both manifests in sync with the release manifest to avoid manual drift."}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"linux-packages-optional",children:"Linux Packages (Optional)"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Optionally build ",(0,a.jsx)(n.code,{children:".deb"})," and ",(0,a.jsx)(n.code,{children:".rpm"})," packages that install the binary to ",(0,a.jsx)(n.code,{children:"/usr/bin"})," and drop a man page."]}),"\n",(0,a.jsx)(n.li,{children:"Host them on packagecloud or GitHub Packages, and link the metadata from the release manifest for consistency."}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"version-managers",children:"Version Managers"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Ship an ",(0,a.jsx)(n.code,{children:"asdf"})," (and optionally ",(0,a.jsx)(n.code,{children:"mise"}),") plugin that reads the release manifest to install requested versions."]}),"\n",(0,a.jsxs)(n.li,{children:["Provide a simple ",(0,a.jsx)(n.code,{children:"bin/install"})," script that delegates to the curl installer, preserving checksum validation."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"post-install-workflow",children:"Post-Install Workflow"}),"\n",(0,a.jsx)(n.p,{children:"Regardless of how the CLI is installed:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Encourage users to run ",(0,a.jsx)(n.code,{children:"webstir install"})," inside each workspace to synchronize the pinned framework packages from the registry (",(0,a.jsx)(n.code,{children:"--dry-run"})," to audit, ",(0,a.jsx)(n.code,{children:"--clean"})," to refresh caches). Mention that GitHub Packages credentials (",(0,a.jsx)(n.code,{children:"GH_PACKAGES_TOKEN"}),") are required until the packages move to npm."]}),"\n",(0,a.jsx)(n.li,{children:"Remind users that the CLI remains self-contained; no additional .NET runtime is required after installation."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"maintainer-checklist",children:"Maintainer Checklist"}),"\n",(0,a.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Run ",(0,a.jsx)(n.code,{children:"publish.sh"})," for every supported platform."]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Update ",(0,a.jsx)(n.code,{children:"install-manifest.json"})," with new version numbers, URLs, and checksums."]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Sign artifacts and update the public keys used by installers."]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Bump Homebrew tap formula, winget/Scoop manifests, and npm wrapper to reference the new release."]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Regenerate installer scripts if defaults changed (paths, flags, dependencies)."]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Verify each channel on a clean machine or container (Homebrew install, npm global install, curl script, winget, Scoop)."]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Update docs or release notes with any behavioral changes."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>r});var s=i(6540);const a={},l=s.createContext(a);function t(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);